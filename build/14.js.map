{"version":3,"sources":["../../src/pages/register/register.module.ts","../../src/pages/register/register.ts"],"names":[],"mappings":"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","file":"14.js","sourcesContent":["import { NgModule } from '@angular/core';\r\nimport { IonicPageModule } from 'ionic-angular';\r\nimport { RegisterPage } from './register';\r\n\r\n@NgModule({\r\n  declarations: [\r\n    RegisterPage,\r\n  ],\r\n  imports: [\r\n    IonicPageModule.forChild(RegisterPage),\r\n  ],\r\n})\r\nexport class RegisterPageModule {}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/register/register.module.ts","import { Component } from '@angular/core';\r\nimport { IonicPage, NavController, NavParams, ToastController } from 'ionic-angular';\r\nimport { FormGroup, FormControl, Validators } from '@angular/forms';\r\nimport { AuthProvider } from '../../providers/auth/auth';\r\n\r\nconst EMAIL_REGEX = /^[a-zA-Z0-9.!#$%&â€™*+/=?^_`{|}~-]+@[a-zA-Z0-9-]+(?:\\.[a-zA-Z0-9-]+)*$/;\r\n\r\n@IonicPage()\r\n@Component({\r\n  selector: 'page-register',\r\n  templateUrl: 'register.html',\r\n})\r\nexport class RegisterPage {\r\n  name: string;\r\n  email: string;\r\n  password: string;\r\n  repassword: string;\r\n  nameCtrl: FormControl;\r\n  emailCtrl: FormControl;\r\n  passwordCtrl: FormControl;\r\n  repasswordCtrl: FormControl;\r\n  registerForm: FormGroup;\r\n  isSubmitting: boolean = false;\r\n\r\n  constructor(public navCtrl: NavController, public navParams: NavParams, public authProvider: AuthProvider, private toastCtrl: ToastController) {\r\n    this.nameCtrl = new FormControl('', Validators.required);\r\n    this.emailCtrl = new FormControl('', [Validators.required, Validators.pattern(EMAIL_REGEX)]);\r\n    this.passwordCtrl = new FormControl('', Validators.required);\r\n    this.repasswordCtrl = new FormControl('', Validators.required);\r\n\r\n    this.registerForm = new FormGroup({\r\n      name: this.nameCtrl,\r\n      email: this.emailCtrl,\r\n      password: this.passwordCtrl,\r\n      repassword: this.repasswordCtrl\r\n    });\r\n  }\r\n\r\n  ionViewDidLoad() {\r\n    console.log('ionViewDidLoad RegisterPage');\r\n  }\r\n\r\n  goToLoginPage() {\r\n    this.navCtrl.push('LoginPage');\r\n  }\r\n\r\n  registerSubmit() {\r\n    if(this.registerForm.valid) {\r\n      this.isSubmitting = true;\r\n      if(this.password == this.repassword) {\r\n        let userData: object = {\r\n          name: this.name,\r\n          email: this.email,\r\n          password: this.password\r\n        };\r\n\r\n        this.authProvider.register(userData).then(userId => {\r\n          if(userId != '') {\r\n            delete userData['password']; // delete password key in userData object\r\n            this.authProvider.saveRegisteredUser(userId, userData).then(res => {\r\n              this.authProvider.sendEmailVerification().then(emailRes => {\r\n                this.isSubmitting = false;\r\n                this.name = \"\";\r\n                this.email = \"\";\r\n                this.password = \"\";\r\n\r\n                this.navCtrl.push('LoginPage');\r\n                  let toast = this.toastCtrl.create({\r\n                    message: 'Email verification was sent to your email, please verify your account to login',\r\n                    duration: 7000,\r\n                    position: 'bottom'\r\n                  });\r\n            \r\n                  toast.present();\r\n              }).catch(err => {\r\n                this.isSubmitting = false;\r\n                  let toast = this.toastCtrl.create({\r\n                    message: err.message,\r\n                    duration: 5000,\r\n                    position: 'bottom'\r\n                  });\r\n            \r\n                  toast.present();\r\n              });\r\n            }).catch(err => {\r\n              this.isSubmitting = false;\r\n              let toast = this.toastCtrl.create({\r\n                message: err.message,\r\n                duration: 5000,\r\n                position: 'bottom'\r\n              });\r\n        \r\n              toast.present();\r\n            });\r\n          }\r\n        }).catch(err => {\r\n          this.isSubmitting = false;\r\n          let toast = this.toastCtrl.create({\r\n            message: err.message,\r\n            duration: 5000,\r\n            position: 'bottom'\r\n          });\r\n    \r\n          toast.present();\r\n        });\r\n      }else {\r\n        this.isSubmitting = false;\r\n        let toast = this.toastCtrl.create({\r\n          message: `Re-enter password doesn't match`,\r\n          duration: 3000,\r\n          position: 'bottom'\r\n        });\r\n\r\n        toast.present();\r\n      }\r\n    }else {\r\n      this.isSubmitting = false;\r\n      let toast = this.toastCtrl.create({\r\n        message: 'Please fill out the fields properly',\r\n        duration: 3000,\r\n        position: 'bottom'\r\n      });\r\n\r\n      toast.present();\r\n    }\r\n  }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/register/register.ts"],"sourceRoot":""}