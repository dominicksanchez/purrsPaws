{"version":3,"sources":["../../src/pages/tabs/tabs.module.ts","../../src/pages/tabs/tabs.ts"],"names":[],"mappings":"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","file":"11.js","sourcesContent":["import { NgModule } from '@angular/core';\r\nimport { IonicPageModule } from 'ionic-angular';\r\nimport { TabsPage } from './tabs';\r\n\r\n@NgModule({\r\n  declarations: [\r\n    TabsPage,\r\n  ],\r\n  imports: [\r\n    IonicPageModule.forChild(TabsPage),\r\n  ],\r\n})\r\nexport class TabsPageModule {}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/tabs/tabs.module.ts","import { Component } from '@angular/core';\r\nimport { IonicPage, NavController, NavParams, App } from 'ionic-angular';\r\nimport { AuthProvider } from '../../providers/auth/auth';\r\nimport * as firebase from 'firebase';\r\nimport 'firebase/firestore';\r\nimport { Badge } from '@ionic-native/badge';\r\n\r\n@IonicPage()\r\n@Component({\r\n  selector: 'page-tabs',\r\n  templateUrl: 'tabs.html',\r\n})\r\nexport class TabsPage {\r\n  tab1: string = \"RegisterpetsPage\";\r\n  tab2: string = \"PetPage\";\r\n  tab3: string = \"LostpetsPage\";\r\n  tab4: string = \"OtherPage\";\r\n  db: any = firebase.firestore();\r\n  userEmailName: string;\r\n  buyAndSellNotifCount: number;\r\n  lostPetNotifCount: number;\r\n  otherNotifCount: number;\r\n  gCount: number;\r\n  tCount: number;\r\n  vCount: number;\r\n\r\n  constructor(\r\n    public navCtrl: NavController, \r\n    public navParams: NavParams, \r\n    private authProvider: AuthProvider, \r\n    public app: App,\r\n    public badge: Badge) {\r\n    this.userEmailName = localStorage.getItem('email').split('@')[0].replace('.','');\r\n    this.getBuyAndSellNotif();\r\n    this.getLostPetNotif();\r\n    this.groompetNotif();\r\n    this.trainpetNotif();\r\n    this.vaccineSchedNotif();\r\n    this.countAllNotif();\r\n  }\r\n\r\n  ionViewDidEnter() {\r\n    this.authProvider.isAuthenticated().then(isAuth => {\r\n      if(isAuth) {\r\n        return true;\r\n      }else {\r\n        this.app.getRootNav().setRoot('HomePage');\r\n      }\r\n    });\r\n  }\r\n\r\n  countAllNotif() {\r\n    firebase.database().ref('notif').on('value', snapshot => {\r\n      let promises = [];\r\n      let totalNotif = 0;\r\n\r\n      const buyAndSell = new Promise((resolve, reject) => {\r\n        firebase.database().ref(`notif/buyandsell/${this.userEmailName}`).once('value', snapshot => {\r\n          if(snapshot.hasChild('unread')) {\r\n            totalNotif += snapshot.val()['unread'];\r\n          }\r\n          resolve(1);\r\n        });\r\n      });\r\n\r\n      const lostPet = new Promise((resolve, reject) => {\r\n        firebase.database().ref(`notif/lostpets/${this.userEmailName}`).once('value', snapshot => {\r\n          if(snapshot.hasChild('unread')) {\r\n            totalNotif += snapshot.val()['unread'];\r\n          }\r\n          resolve(1);\r\n        });\r\n      });\r\n\r\n      const chat = new Promise((resolve, reject) => {\r\n        firebase.database().ref(`notif/chats/${this.userEmailName}`).once('value', snapshot => {\r\n          if(snapshot.hasChild('unread')) {\r\n            totalNotif += snapshot.val()['unread'];\r\n          }\r\n          resolve(1);\r\n        });\r\n      });\r\n\r\n      const groompet = new Promise((resolve, reject) => {\r\n        firebase.database().ref(`notif/groompet/${this.userEmailName}`).once('value', snapshot => {\r\n          if(snapshot.hasChild('unread')) {\r\n            totalNotif += snapshot.val()['unread'];\r\n          }\r\n          resolve(1);\r\n        });\r\n      });\r\n\r\n      const trainpet = new Promise((resolve, reject) => {\r\n        firebase.database().ref(`notif/trainpet/${this.userEmailName}`).once('value', snapshot => {\r\n          if(snapshot.hasChild('unread')) {\r\n            totalNotif += snapshot.val()['unread'];\r\n          }\r\n          resolve(1);\r\n        });\r\n      });\r\n\r\n      const vaccinesched = new Promise((resolve, reject) => {\r\n        firebase.database().ref(`notif/vaccinesched/${this.userEmailName}`).once('value', snapshot => {\r\n          if(snapshot.hasChild('unread')) {\r\n            totalNotif += snapshot.val()['unread'];\r\n          }\r\n          resolve(1);\r\n        });\r\n      });\r\n\r\n      const adoptPet = new Promise((resolve, reject) => {\r\n        firebase.database().ref(`notif/adopt/${this.userEmailName}`).once('value', snapshot => {\r\n          if (snapshot.hasChild('unread')) {\r\n            totalNotif += snapshot.val()['unread'];\r\n          }\r\n          resolve(1);\r\n        });\r\n      });\r\n\r\n      promises.push(buyAndSell, lostPet, chat, groompet, trainpet, vaccinesched, adoptPet);\r\n\r\n\r\n      Promise.all(promises).then(() => {\r\n        this.badge.set(totalNotif);\r\n        console.log('totalNotif', totalNotif)\r\n      });\r\n    }); \r\n  }\r\n\r\n  getBuyAndSellNotif() {\r\n    firebase.database().ref(`notif/buyandsell/${this.userEmailName}`).on('value', snapshot => {\r\n      if(snapshot.hasChild('unread')) {\r\n        this.buyAndSellNotifCount = snapshot.val()['unread'];\r\n      }else {\r\n        this.buyAndSellNotifCount = 0;\r\n      }\r\n    });\r\n  }\r\n\r\n  getAdoptCount() {\r\n    firebase.database().ref(`notif/adopt/${this.userEmailName}`).on('value', snapshot => {\r\n      if(snapshot.hasChild('unread')) {\r\n        this.otherNotifCount += snapshot.val()['unread'];\r\n      }\r\n    });\r\n  }\r\n\r\n  getLostPetNotif() {\r\n    firebase.database().ref(`notif/lostpets/${this.userEmailName}`).on('value', snapshot => {\r\n      if(snapshot.hasChild('unread')) {\r\n        this.lostPetNotifCount = snapshot.val()['unread'];\r\n      }else {\r\n        this.lostPetNotifCount = 0;\r\n      }\r\n    });\r\n  }\r\n\r\n  groompetNotif() {\r\n    firebase.database().ref(`notif/groompet/${this.userEmailName}`).on('value', snapshot => {\r\n      if(snapshot.hasChild('unread')) {\r\n        this.gCount = snapshot.val()['unread'];\r\n      }else {\r\n        this.gCount = 0;\r\n      }\r\n    });\r\n  }\r\n\r\n  trainpetNotif() {\r\n    firebase.database().ref(`notif/trainpet/${this.userEmailName}`).on('value', snapshot => {\r\n      if(snapshot.hasChild('unread')) {\r\n        this.tCount = snapshot.val()['unread'];\r\n      }else {\r\n        this.tCount = 0;\r\n      }\r\n    });\r\n  }\r\n\r\n  vaccineSchedNotif() {\r\n    firebase.database().ref(`notif/vaccinesched/${this.userEmailName}`).on('value', snapshot => {\r\n      if(snapshot.hasChild('unread')) {\r\n        this.vCount = snapshot.val()['unread'];\r\n      }else {\r\n        this.vCount = 0;\r\n      }\r\n    });\r\n  }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/tabs/tabs.ts"],"sourceRoot":""}